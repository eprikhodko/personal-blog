---
title: "Компоненты высшего порядка в React"
date: "2022-01-07"
hero_image: ""
hero_image_alt: "empty"
---

- Higher-Order Components (Компоненты высшего порядка, HOC) позволяют повторно использовать код компонентов.
- Компонент высшего порядка представляет собой функцию, которая принимает компонент, как аргумент, затем преобразует этот компонент в другой компонент, наделяя его какими либо новыми способностями, и затем возвращает новый компонент.

_Разберем пример использования компонентов высшего порядка ниже_

Есть простое приложение, вот его UI:

![UI исходного приложения](./2022-01-17_13-33.png)

Вот так выглядит App.js:

```js highlights=1,3-5
// fizzbuzz in JS
for (let i = 1; i <= 100; i++) {
  let out = ""
  if (i % 3 === 0) out += "Fizz"
  if (i % 5 === 0) out += "Buzz"
  console.log(out || i)
}
```

```jsx file=src/App.js
import Menu from "./Menu"
import Favorite from "./Favorite"

function App() {
  return (
    <div className="App">
      <div>
        <Menu />
        <hr />
        <Favorite />
      </div>
    </div>
  )
}

export default App
```

App рендерит два компонента, Menu и Favorite:

```jsx file=src/Menu.js
import { useState } from "react"

function Menu() {
  const [showMenu, setShowMenu] = useState(true)

  const toggleShow = () => setShowMenu((prevState) => !prevState)

  return (
    <div>
      <nav style={{ display: showMenu ? "block" : "none" }}>
        <h5>Signed in as newUser</h5>
        <a> Your Profile </a>
        <a> - Your Collection </a>
        <a> - Your Wishlist </a>
      </nav>
      <br />
      <button type="button" onClick={toggleShow} style={{ cursor: "pointer" }}>
        {showMenu ? "Hide" : "Show"} Menu
      </button>
    </div>
  )
}

export default Menu
```

```jsx file=src/Favorite.js
import { useState } from "react"
import { higherOrderComponent } from "./HOCs/withToggler"

function Favorite() {
  const [isFavorited, setIsFavorited] = useState(false)

  const toggleFavorite = () => setIsFavorited((prevState) => !prevState)

  return (
    <div>
      <h3>Add to favorite</h3>
      <h1>
        <span onClick={toggleFavorite} style={{ cursor: "pointer" }}>
          {isFavorited ? "❤️" : "♡"}
        </span>
      </h1>
    </div>
  )
}

const EnhancedFavoriteComponent = higherOrderComponent(Favorite)
export default EnhancedFavoriteComponent
```

Возьмем два компонента, которые используют похожую логику. Представим, что это две кнопки. Одна кнопка показывает или скрывает при нажатии меню, а другая кнопка ставит, или снимает лайк. У этих двух компонентов похожий стейт. Этот стейт представляет собой boolean, значение которого может быть или false, или true. И есть у этих двух компонентов функция, которая вызывается при нажатии на кнопку, и меняет стейт или на false, или на true, в зависимости от того, какой стейт был до этого. Как можно удалить эту логику из этих двух компонентов, и использовать ее повторно? В этом нам поможет компонент высшего порядка. Этот компонент представляет собой функцию, которая принимает какой либо компонент как аргумент.

```js file=fancy-button.js
const EnhancedComponent = higherOrderComponent(WrappedComponent)
```

В этой статье мы разберем, чем полезны компоненты высшего порядка, и как их создавать.

Идея компонентов высшего порядка берет свое начало из концепта функций высшего порядка (Higher-Order functions). <br />
Функция высшего порядка - это функция, которая принимает другую функцию как аргумент. Часто этот аргумент называется коллбэком (обратный вызов, callback) и он вызывается после совершения каких то других действий.

Пример функций высшего порядка - это некоторые методы массивов, такие как .filter(), .map(), .reduce(). Разница между этими тремя методами и другими методами, такими как .pop(), .push(), или .shift() заключается в том, что filter, map и reduce, принимают функции как аргументы.

Так вот, компонент высшего порядка в React - это функция, которая принимает какой то другой компонент, и возвращает новый компонент, и предоставляет ему какие то новые дополнительные возможности.

```js
const EnhancedComponent = higherOrderComponent(WrappedComponent)
```

_ниже располагаются мои записи к [лекции по компонентам высшего порядка в scrimba.com](https://scrimba.com/learn/react/higher-order-components-hocs-part-1-cQq9QKcJ), с курса The React Bootcamp_

_Очень коротко, что можно рассказать про HOC, не прибегая к коду, своими словами?_
